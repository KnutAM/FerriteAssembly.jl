<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>DomainBuffers · FerriteAssembly.jl</title><meta name="title" content="DomainBuffers · FerriteAssembly.jl"/><meta property="og:title" content="DomainBuffers · FerriteAssembly.jl"/><meta property="twitter:title" content="DomainBuffers · FerriteAssembly.jl"/><meta name="description" content="Documentation for FerriteAssembly.jl."/><meta property="og:description" content="Documentation for FerriteAssembly.jl."/><meta property="twitter:description" content="Documentation for FerriteAssembly.jl."/><meta property="og:url" content="https://KnutAM.github.io/FerriteAssembly.jl/DomainBuffers/Setup/"/><meta property="twitter:url" content="https://KnutAM.github.io/FerriteAssembly.jl/DomainBuffers/Setup/"/><link rel="canonical" href="https://KnutAM.github.io/FerriteAssembly.jl/DomainBuffers/Setup/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">FerriteAssembly.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Learning by doing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-2-1" type="checkbox"/><label class="tocitem" for="menuitem-2-1"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorials/heat_equation/">Heat Equation</a></li><li><a class="tocitem" href="../../tutorials/viscoelasticity/">Viscoelasticity with state variables</a></li><li><a class="tocitem" href="../../tutorials/incompressible_elasticity/">Multiple fields</a></li><li><a class="tocitem" href="../../tutorials/mixed_materials/">Multiple materials</a></li><li><a class="tocitem" href="../../tutorials/iga/">Using <code>IGA.jl</code></a></li><li><a class="tocitem" href="../../tutorials/phasefield_fracture/">Phase-field fracture</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-2" type="checkbox"/><label class="tocitem" for="menuitem-2-2"><span class="docs-label">How-to</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../howto/threaded_assembly/">Threaded assembly</a></li><li><a class="tocitem" href="../../howto/automatic_differentiation/">Automatic differentiation</a></li><li><a class="tocitem" href="../../howto/local_constraints/">Local constraint application</a></li><li><a class="tocitem" href="../../howto/robin_bc/">Robin boundary conditions</a></li><li><a class="tocitem" href="../../howto/volume_integral/">Volume integration</a></li><li><a class="tocitem" href="../../howto/surface_integral/">Surface integration</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox" checked/><label class="tocitem" for="menuitem-3"><span class="docs-label">Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../design/">Design</a></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox" checked/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">DomainBuffers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>DomainBuffers</a><ul class="internal"><li><a class="tocitem" href="#Setup-API"><span>Setup API</span></a></li><li><a class="tocitem" href="#AbstractDomainBuffer"><span>AbstractDomainBuffer</span></a></li><li><a class="tocitem" href="#Coupled-simulations"><span>Coupled simulations</span></a></li></ul></li><li><a class="tocitem" href="../StateVariables/">State variables</a></li><li><a class="tocitem" href="../ItemBuffer/">ItemBuffer</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Workers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Workers/Workers/">Workers</a></li><li><a class="tocitem" href="../../Workers/Assemblers/">Assemblers</a></li><li><a class="tocitem" href="../../Workers/Integrators/">Integrators</a></li><li><a class="tocitem" href="../../Workers/QuadPointEvaluator/">Quadrature point eval</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-4" type="checkbox"/><label class="tocitem" for="menuitem-3-4"><span class="docs-label">Convenience</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Convenience/LoadHandler/">External loads</a></li><li><a class="tocitem" href="../../Convenience/MaterialModelsBase/">Mechanical materials</a></li><li><a class="tocitem" href="../../Convenience/ExampleElements/">Example elements</a></li></ul></li><li><a class="tocitem" href="../../Customization/">Customizations</a></li><li><a class="tocitem" href="../../internals/">Internals</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Reference</a></li><li><a class="is-disabled">DomainBuffers</a></li><li class="is-active"><a href>DomainBuffers</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>DomainBuffers</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/KnutAM/FerriteAssembly.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/KnutAM/FerriteAssembly.jl/blob/main/docs/src/DomainBuffers/Setup.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="DomainBufferSetup"><a class="docs-heading-anchor" href="#DomainBufferSetup">Setup</a><a id="DomainBufferSetup-1"></a><a class="docs-heading-anchor-permalink" href="#DomainBufferSetup" title="Permalink"></a></h1><h2 id="Setup-API"><a class="docs-heading-anchor" href="#Setup-API">Setup API</a><a id="Setup-API-1"></a><a class="docs-heading-anchor-permalink" href="#Setup-API" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteAssembly.DomainSpec" href="#FerriteAssembly.DomainSpec"><code>FerriteAssembly.DomainSpec</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">DomainSpec(sdh::SubDofHandler, material, fe_values; set=_getcellset(sdh), colors_or_chunks=nothing, user_data=nothing)
DomainSpec(dh::DofHandler, material, fe_values; set=1:getncells(dh), colors=nothing, chunks=nothing, user_data=nothing)</code></pre><p>Create a <code>DomainSpec</code> that can be used to set up a domain buffer. </p><ul><li><code>sdh</code>/<code>dh</code>: Give the <code>DofHandler</code> for the domain in question, or a <code>SubDofHandler</code> in case there are more than one in <code>DofHandler</code>  (See <code>Ferrite.jl&#39;s documentation</code>)</li><li><code>material</code>: Used for dispatch on the utilized <code>worker</code>&#39;s function. </li><li><code>fe_values</code>: <code>CellValues</code> or <code>FacetValues</code> depending on the type of domain. </li><li><code>set</code>: The items in the domain, the element type determines the type of domain <ul><li>Cell domain: <code>Int</code></li><li>Facet domain: <code>FacetIndex</code></li></ul></li><li><code>colors::Vector{Vector{I}}</code>: used to avoid race conditions when multithreading.  For cell domains, <code>I=Int</code>, and for facet domains, <code>I</code> can be either <code>Int</code>  (denoting cell numbers) or <code>FacetIndex</code> for actual facets. If <code>I=Int</code>, it will be  converted to <code>FacetIndex</code> internally. If <code>colors=nothing</code> and <code>chunks=nothing</code>,  <code>Ferrite.jl</code>&#39;s default coloring algorithm is used.</li><li><code>chunks::Vector{Vector{Vector{I}}}</code>. During multithreading, each task works with  items in one <code>chunk::Vector{I}</code> at a time. Items in <code>chunks[k][i]</code> and <code>chunks[k][j]</code> should be independent (i.e. not share dofs). If given, this input takes precedence over  <code>colors</code>. For <code>chunks</code>, <code>I</code> must be <code>Int</code> for cell domains and <code>FacetIndex</code> for facet domains. </li><li><code>user_data</code>: Can be whatever the user wants to and is passed along by reference everywhere.  It is accessible from the <code>ItemBuffer</code> (e.g. <code>CellBuffer</code>) given to the <code>worker</code>&#39;s function via the <code>get_user_data</code> function. However, since it is passed by reference, modifying values  during work, care must be taken to ensure thread safety.  To avoid allocations, caches can be created separately with <code>allocate_cell_cache</code> and  <code>allocate_facet_cache</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteAssembly.jl/blob/24d107496cc205d3133be9a72783cb35babe2261/src/setup.jl#L1-L29">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteAssembly.setup_domainbuffer" href="#FerriteAssembly.setup_domainbuffer"><code>FerriteAssembly.setup_domainbuffer</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">setup_domainbuffer(domain::DomainSpec; a=nothing, threading=false, autodiffbuffer=false)</code></pre><p>Setup a domain buffer for a single grid domain, <code>domain</code>. </p><ul><li><code>a::Vector</code>: The global degree of freedom values are used to pass the  local element dof values to the <a href="../StateVariables/#FerriteAssembly.create_cell_state"><code>create_cell_state</code></a> function,  making it possible to create the initial state dependent on the initial  conditions for the field variables. </li><li><code>threading</code>: Should a <code>ThreadedDomainBuffer</code> be created to work the grid multithreaded if supported by the used <code>worker</code>?</li><li><code>autodiffbuffer</code>: Should a custom itembuffer be used to speed up the automatic  differentiation (if supported by the itembuffer)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteAssembly.jl/blob/24d107496cc205d3133be9a72783cb35babe2261/src/setup.jl#L92-L104">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteAssembly.setup_domainbuffers" href="#FerriteAssembly.setup_domainbuffers"><code>FerriteAssembly.setup_domainbuffers</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">setup_domainbuffers(domains::Dict{String,DomainSpec}, suppress_warnings = false; kwargs...)</code></pre><p>Setup multiple domain buffers, one for each <code>DomainSpec</code> in <code>domains</code>. Set <code>suppress_warnings = true</code> to suppress warnings checking for typical input errors when setting up multiple domains.  See <a href="#FerriteAssembly.setup_domainbuffer"><code>setup_domainbuffer</code></a> for description of the keyword arguments.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteAssembly.jl/blob/24d107496cc205d3133be9a72783cb35babe2261/src/setup.jl#L48-L54">source</a></section></article><h2 id="AbstractDomainBuffer"><a class="docs-heading-anchor" href="#AbstractDomainBuffer">AbstractDomainBuffer</a><a id="AbstractDomainBuffer-1"></a><a class="docs-heading-anchor-permalink" href="#AbstractDomainBuffer" title="Permalink"></a></h2><p>The domain buffer be a <code>DomainBuffer</code>, <code>ThreadedDomainBuffer</code>, or a <code>Dict{String}</code> with eltype  of one of the former. The following functions are defined for these buffers:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteAssembly.get_material-Tuple{Dict{String, &lt;:FerriteAssembly.AbstractDomainBuffer}, String}" href="#FerriteAssembly.get_material-Tuple{Dict{String, &lt;:FerriteAssembly.AbstractDomainBuffer}, String}"><code>FerriteAssembly.get_material</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_material(dbs::Dict{String,AbstractDomainBuffer}, domain::String)
get_material(db::AbstractDomainBuffer)
get_material(sim::Simulation)</code></pre><p>Get the material for the domain represented by <code>db</code> or <code>dbs[domain]</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteAssembly.jl/blob/24d107496cc205d3133be9a72783cb35babe2261/src/DomainBuffers.jl#L62-L68">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteAssembly.get_dofhandler-Tuple{Dict{String, &lt;:FerriteAssembly.AbstractDomainBuffer}}" href="#FerriteAssembly.get_dofhandler-Tuple{Dict{String, &lt;:FerriteAssembly.AbstractDomainBuffer}}"><code>FerriteAssembly.get_dofhandler</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_dofhandler(dbs::Dict{String,AbstractDomainBuffer})
get_dofhandler(db::AbstractDomainBuffer)
get_dofhandler(sim::Simulation)</code></pre><p>Get the dofhandler stored in <code>db</code>. Note that this is the global dofhandler, and not the <code>SubDofHandler</code> that is local to a specific domain.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteAssembly.jl/blob/24d107496cc205d3133be9a72783cb35babe2261/src/DomainBuffers.jl#L8-L15">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteAssembly.get_state-Tuple{Dict{String, &lt;:FerriteAssembly.AbstractDomainBuffer}, String}" href="#FerriteAssembly.get_state-Tuple{Dict{String, &lt;:FerriteAssembly.AbstractDomainBuffer}, String}"><code>FerriteAssembly.get_state</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_state(dbs::Dict{String,AbstractDomainBuffer}, domain::String)
get_state(db::Union{AbstractDomainBuffer,Dict{String,AbstractDomainBuffer}})
get_state(sim::Simulation[, domain::String])</code></pre><p>Get the <code>states::Dict{Int,S}</code>, where <code>S</code> type of the state for each entity in the domain, stored in the <code>db</code> or <code>dbs[domain]</code>. If no <code>domain</code> is given for multiple domains, a  Dict{String} is returned with state variables for each domain</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteAssembly.jl/blob/24d107496cc205d3133be9a72783cb35babe2261/src/DomainBuffers.jl#L38-L46">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteAssembly.get_old_state-Tuple{Dict{String, &lt;:FerriteAssembly.AbstractDomainBuffer}, String}" href="#FerriteAssembly.get_old_state-Tuple{Dict{String, &lt;:FerriteAssembly.AbstractDomainBuffer}, String}"><code>FerriteAssembly.get_old_state</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_old_state(dbs::Dict{String,AbstractDomainBuffer}, domain::String)
get_old_state(db::Union{AbstractDomainBuffer,Dict{String,AbstractDomainBuffer}})
get_old_state(sim::Simulation[, domain::String])</code></pre><p>Get the <code>states::Dict{Int,S}</code>, where <code>S</code> type of the state for each entity in the domain, stored in the <code>db</code> or <code>dbs[domain]</code>. If no <code>domain</code> is given for multiple domains, a  Dict{String} is returned with state variables for each domain</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteAssembly.jl/blob/24d107496cc205d3133be9a72783cb35babe2261/src/DomainBuffers.jl#L50-L58">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteAssembly.getset" href="#FerriteAssembly.getset"><code>FerriteAssembly.getset</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">getset(dbs::Dict{String,AbstractDomainBuffer}, domain::String)
getset(db::AbstractDomainBuffer)
getset(sim::Simulation[, domain::String])</code></pre><p>Get the set of items stored in <code>db</code> or <code>dbs[domain]</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteAssembly.jl/blob/24d107496cc205d3133be9a72783cb35babe2261/src/DomainBuffers.jl#L131-L137">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteAssembly.update_states!-Tuple{Dict{String, &lt;:FerriteAssembly.AbstractDomainBuffer}}" href="#FerriteAssembly.update_states!-Tuple{Dict{String, &lt;:FerriteAssembly.AbstractDomainBuffer}}"><code>FerriteAssembly.update_states!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">update_states!(db::Dict{String,AbstractDomainBuffer})
update_states!(db::AbstractDomainBuffer)
update_states!(sim::Simulation)</code></pre><p>Update the states such that <code>old_states = states</code> for the states  stored in <code>db</code>.</p><p>This method tries to avoid allocating new values where possible.  Currently, if <a href="../StateVariables/#FerriteAssembly.create_cell_state"><code>create_cell_state</code></a> returns <code>T</code> or <code>Vector{T}</code> where <code>isbitstype(T)</code>, this works. If needed/wanted, it should be relatively easy to provide an interface to make it possible to have allocation free  for custom cell states.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteAssembly.jl/blob/24d107496cc205d3133be9a72783cb35babe2261/src/DomainBuffers.jl#L72-L84">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteAssembly.set_time_increment!-Tuple{Dict{String, &lt;:FerriteAssembly.AbstractDomainBuffer}, Any}" href="#FerriteAssembly.set_time_increment!-Tuple{Dict{String, &lt;:FerriteAssembly.AbstractDomainBuffer}, Any}"><code>FerriteAssembly.set_time_increment!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">set_time_increment!(db::Dict{String,AbstractDomainBuffer}, Δt)
set_time_increment!(db::AbstractDomainBuffer, Δt)
set_time_increment!(sim::Simulation, Δt)</code></pre><p>Update the time increment stored in <code>db</code>, which is passed on to the  stored <code>AbstractItemBuffer</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteAssembly.jl/blob/24d107496cc205d3133be9a72783cb35babe2261/src/DomainBuffers.jl#L91-L98">source</a></section></article><h2 id="Coupled-simulations"><a class="docs-heading-anchor" href="#Coupled-simulations">Coupled simulations</a><a id="Coupled-simulations-1"></a><a class="docs-heading-anchor-permalink" href="#Coupled-simulations" title="Permalink"></a></h2><p>The <code>Simulation</code> type contains an abstract domain buffer, along with (optionally)  the global degree of freedom values, which are used to get the local values for each item. The main purpose is to conveniently collect these when passing into <a href="../../Workers/Workers/#FerriteAssembly.work!"><code>work!</code></a>,  especially in the case of <code>CoupledSimulations</code>.</p><p>The idea behind the coupled simulation setup is to give access to values from a different simulation at the item level. For example, when solving two separate problems in parallel, and using staggered iterations. See the <a href="../../tutorials/phasefield_fracture/#Phase-field-fracture">Phase-field fracture tutorial</a> for an example. </p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteAssembly.Simulation" href="#FerriteAssembly.Simulation"><code>FerriteAssembly.Simulation</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Simulation(db, a = nothing, aold = nothing)</code></pre><p>A <code>Simulation</code> is a collection of the simulation domain(s) <code>db</code>, and the  global degree of freedom vectors, <code>a</code> and <code>aold</code>. </p><p><strong>Note:</strong>  If <code>a</code> or <code>aold</code> are not provided, the local vectors will have <code>NaN</code> values.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteAssembly.jl/blob/24d107496cc205d3133be9a72783cb35babe2261/src/Simulation.jl#L1-L9">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteAssembly.couple_buffers" href="#FerriteAssembly.couple_buffers"><code>FerriteAssembly.couple_buffers</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">couple_buffers(dbs::Dict{String, &lt;:AbstractDomainBuffer}; kwargs::Dict{String, &lt;:AbstractDomainBuffer}...)
couple_buffers(db::AbstractDomainBuffer; kwargs::AbstractDomainBuffer...)</code></pre><p>Return new buffer(s) that are coupled with the buffers provided as keyword arguments. The key is used in  <a href="../ItemBuffer/#FerriteAssembly.get_coupled_buffer"><code>get_coupled_buffer</code></a> to get the coupled itembuffer, such that its values may be queried. </p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>This functionality assumes that each setup has the same grid, and in case of multiple domains, these should also  match.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteAssembly.jl/blob/24d107496cc205d3133be9a72783cb35babe2261/src/DomainBuffers.jl#L116-L126">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteAssembly.CoupledSimulations" href="#FerriteAssembly.CoupledSimulations"><code>FerriteAssembly.CoupledSimulations</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">CoupledSimulations(; key1 = sim1::Simulation, key2 = sim2::Simulation, ...)</code></pre><p>Setup the collection of coupled simulations to allow values (such as state variables and  local dof-values from these simulations to be available when <code>work!</code>ing another simulation,  if the buffers have been coupled with <a href="#FerriteAssembly.couple_buffers"><code>couple_buffers</code></a>.  The coupled itembuffer on the local level is accessed with <a href="../ItemBuffer/#FerriteAssembly.get_coupled_buffer"><code>get_coupled_buffer</code></a>. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteAssembly.jl/blob/24d107496cc205d3133be9a72783cb35babe2261/src/Simulation.jl#L52-L59">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../design/">« Design</a><a class="docs-footer-nextpage" href="../StateVariables/">State variables »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.10.1 on <span class="colophon-date" title="Monday 21 April 2025 16:49">Monday 21 April 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
