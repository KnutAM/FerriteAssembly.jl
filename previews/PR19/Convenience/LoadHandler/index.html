<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>External loads · FerriteAssembly.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link rel="canonical" href="https://KnutAM.github.io/FerriteAssembly.jl/Convenience/LoadHandler/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">FerriteAssembly.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Learning by doing</span><ul><li><input class="collapse-toggle" id="menuitem-2-1" type="checkbox"/><label class="tocitem" for="menuitem-2-1"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorials/heat_equation/">Heat Equation</a></li><li><a class="tocitem" href="../../tutorials/viscoelasticity/">Viscoelasticity with state variables</a></li><li><a class="tocitem" href="../../tutorials/incompressible_elasticity/">Multiple fields</a></li><li><a class="tocitem" href="../../tutorials/mixed_materials/">Multiple materials</a></li><li><a class="tocitem" href="../../tutorials/iga/">Isogeometric analysis with <code>IGA.jl</code></a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-2" type="checkbox"/><label class="tocitem" for="menuitem-2-2"><span class="docs-label">How-to</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../howto/threaded_assembly/">Threaded assembly</a></li><li><a class="tocitem" href="../../howto/automatic_differentiation/">Automatic differentiation</a></li><li><a class="tocitem" href="../../howto/local_constraints/">Local constraint application</a></li><li><a class="tocitem" href="../../howto/robin_bc/">Robin boundary conditions</a></li><li><a class="tocitem" href="../../howto/volume_integral/">Volume integration</a></li><li><a class="tocitem" href="../../howto/surface_integral/">Surface integration</a></li></ul></li></ul></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="../../design/">Design</a></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">DomainBuffers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../DomainBuffers/Setup/">DomainBuffers</a></li><li><a class="tocitem" href="../../DomainBuffers/StateVariables/">State variables</a></li><li><a class="tocitem" href="../../DomainBuffers/ItemBuffer/">ItemBuffer</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Workers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Workers/Workers/">Workers</a></li><li><a class="tocitem" href="../../Workers/Assemblers/">Assemblers</a></li><li><a class="tocitem" href="../../Workers/Integrators/">Integrators</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-4" type="checkbox" checked/><label class="tocitem" for="menuitem-3-4"><span class="docs-label">Convenience</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>External loads</a></li><li><a class="tocitem" href="../MaterialModelsBase/">Mechanical materials</a></li><li><a class="tocitem" href="../ExampleElements/">Example elements</a></li></ul></li><li><a class="tocitem" href="../../Customization/">Customizations</a></li><li><a class="tocitem" href="../../internals/">Internals</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Reference</a></li><li><a class="is-disabled">Convenience</a></li><li class="is-active"><a href>External loads</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>External loads</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/KnutAM/FerriteAssembly.jl/blob/main/docs/src/Convenience/LoadHandler.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="External-loading"><a class="docs-heading-anchor" href="#External-loading">External loading</a><a id="External-loading-1"></a><a class="docs-heading-anchor-permalink" href="#External-loading" title="Permalink"></a></h1><p>In many simulations, there is a need to add contributions to the weak form  in the form of external loads, either as source terms/body loads, or as  non-zero Neumann boundary conditions. <code>FerriteAssembly</code> provides a  <code>LoadHandler</code> for this purpose, such that it is not necessary to  implement those terms into the specific elements directly. This avoid having  to pass information to the elements about changes to the load levels etc. </p><article class="docstring"><header><a class="docstring-binding" id="FerriteAssembly.LoadHandler" href="#FerriteAssembly.LoadHandler"><code>FerriteAssembly.LoadHandler</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">LoadHandler(dh::AbstractDofHandler)</code></pre><p>Create a load handler for external loads to be applied on the  finite element simulation defined by a dofhandler <code>dh</code>.  It can be used to apply the Neumann and body load   contributions to the external &quot;force&quot;-vector, <code>fext</code>:</p><pre><code class="language-julia hljs">fext = zeros(ndofs(dh))
lh=LoadHandler(dh)
add!(lh, Neumann(...))  # Add Neumann boundary conditions
add!(lh, BodyLoad(...)) # Add body load
for t in timesteps
    fill!(fext, 0)
    apply!(fext, lh, t) # Add contributions to `fext`
    ...
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteAssembly.jl/blob/092fa011fcab47757900b6031e52695d391618f1/src/LoadHandler/LoadHandler.jl#L6-L25">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteAssembly.Neumann" href="#FerriteAssembly.Neumann"><code>FerriteAssembly.Neumann</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Neumann(field_name::Symbol, fv_info::Union{FaceValues,QuadratureRule,Int}, faceset::Set{FaceIndex}, f)</code></pre><p>Define a Neumann contribution with the weak forms according to </p><p class="math-container">\[\int_{\Gamma} f \ \delta u \ \mathrm{d}\Gamma, \quad \text{Scalar fields} \\

\int_{\Gamma} \boldsymbol{f} \cdot \boldsymbol{\delta u} \ \mathrm{d}\Gamma,
\quad \text{Vector fields} \]</p><p>where <span>$\Gamma$</span> is the boundary where the contribution is active.  <span>$f$</span>, or <span>$\boldsymbol{f}$</span>, is the prescribed Neumann value,  defined by a function with signatures</p><p><code>f(x::Vec, t::Real, n::Vec) -&gt; Number</code> (Scalar field)</p><p><code>f(x::Vec, t::Real, n::Vec) -&gt; Vec{dim}</code> (Vector field)</p><p>where <code>x</code> is the spatial position of the current quadrature point, <code>t</code> is the  current time, and <code>n</code> is the face normal vector. The remaining input arguments are</p><ul><li><code>fieldname</code> describes the field on which the boundary condition should abstract</li><li><code>fv_info</code> gives required input to determine the facevalues. The following input types are accepted:<ul><li><code>Int</code> giving the integration order to use. <code>FaceValues</code> are deduced from the interpolation  of <code>fieldname</code> and the output of <code>f</code>. </li><li><code>QuadratureRule</code> matching the interpolation for <code>fieldname</code> for faces in <code>faceset</code> <code>FaceValues</code> are deduced  from the output of <code>f</code></li><li><code>FaceValues</code> matching the interpolation for <code>fieldname</code> for the faces in <code>faceset</code> and output of <code>f</code></li></ul></li><li><code>faceset</code> describes which faces the BC is applied to</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteAssembly.jl/blob/092fa011fcab47757900b6031e52695d391618f1/src/LoadHandler/Neumann.jl#L1-L30">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteAssembly.BodyLoad" href="#FerriteAssembly.BodyLoad"><code>FerriteAssembly.BodyLoad</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">BodyLoad(field_name::Symbol, cv_info::Union{CellValues,QuadratureRule,Int}, cellset::Set{Int}, f)
BodyLoad(field_name::Symbol, cv_info::Union{CellValues,QuadratureRule,Int}, f)</code></pre><p>Define a body load contribution with the weak forms according to </p><p class="math-container">\[\int_{\Omega} f \ \delta u \ \mathrm{d}\Omega, \quad \text{Scalar fields} \\

\int_{\Omega} \boldsymbol{f} \cdot \boldsymbol{\delta u} \ \mathrm{d}\Omega,
\quad \text{Vector fields} \]</p><p>where <span>$\Omega$</span> is the region where the contribution is active.  <span>$f$</span>, or <span>$\boldsymbol{f}$</span>, is the prescribed volumetric contribution (e.g. force/volume),  defined by a function with signatures</p><p><code>f(x::Vec, t::Real) -&gt; Number</code> (Scalar field)</p><p><code>f(x::Vec, t::Real) -&gt; Vec{dim}</code> (Vector field)</p><p>where <code>x</code> is the spatial position of the current quadrature point and <code>t</code> is the  current time. The remaining input arguments are</p><ul><li><p><code>fieldname</code> describes the field on which the load should act</p></li><li><p><code>cv_info</code> gives required input to determine the cellvalues. The following input types are accepted:</p><ul><li><code>Int</code> giving the integration order to use. <code>CellValues</code> are deduced from the interpolation  of <code>fieldname</code> and the output of <code>f</code>.   </li><li><code>QuadratureRule</code> matching the interpolation for <code>fieldname</code> for cells in <code>cellset</code>.  <code>CellValues</code> are deduced from the output of <code>f</code></li><li><code>CellValues</code> matching the interpolation for <code>fieldname</code> for the cells in <code>cellset</code> and output of <code>f</code></li></ul></li><li><p><code>cellset</code> describes which cells the load is applied to. If not given, the load is applied to all cells </p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteAssembly.jl/blob/092fa011fcab47757900b6031e52695d391618f1/src/LoadHandler/BodyLoad.jl#L1-L32">source</a></section></article><pre><code class="nohighlight hljs"></code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../Workers/Integrators/">« Integrators</a><a class="docs-footer-nextpage" href="../MaterialModelsBase/">Mechanical materials »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Friday 15 September 2023 21:24">Friday 15 September 2023</span>. Using Julia version 1.9.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
