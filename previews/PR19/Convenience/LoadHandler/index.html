<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>External loads · FerriteAssembly.jl</title><meta name="title" content="External loads · FerriteAssembly.jl"/><meta property="og:title" content="External loads · FerriteAssembly.jl"/><meta property="twitter:title" content="External loads · FerriteAssembly.jl"/><meta name="description" content="Documentation for FerriteAssembly.jl."/><meta property="og:description" content="Documentation for FerriteAssembly.jl."/><meta property="twitter:description" content="Documentation for FerriteAssembly.jl."/><meta property="og:url" content="https://KnutAM.github.io/FerriteAssembly.jl/Convenience/LoadHandler/"/><meta property="twitter:url" content="https://KnutAM.github.io/FerriteAssembly.jl/Convenience/LoadHandler/"/><link rel="canonical" href="https://KnutAM.github.io/FerriteAssembly.jl/Convenience/LoadHandler/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">FerriteAssembly.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Learning by doing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-2-1" type="checkbox"/><label class="tocitem" for="menuitem-2-1"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorials/heat_equation/">Heat Equation</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-2" type="checkbox"/><label class="tocitem" for="menuitem-2-2"><span class="docs-label">How-to</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../howto/surface_integral/">Surface integration</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox" checked/><label class="tocitem" for="menuitem-3"><span class="docs-label">Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../design/">Design</a></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">DomainBuffers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../DomainBuffers/Setup/">DomainBuffers</a></li><li><a class="tocitem" href="../../DomainBuffers/StateVariables/">State variables</a></li><li><a class="tocitem" href="../../DomainBuffers/ItemBuffer/">ItemBuffer</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Workers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Workers/Workers/">Workers</a></li><li><a class="tocitem" href="../../Workers/Assemblers/">Assemblers</a></li><li><a class="tocitem" href="../../Workers/Integrators/">Integrators</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-4" type="checkbox" checked/><label class="tocitem" for="menuitem-3-4"><span class="docs-label">Convenience</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>External loads</a></li><li><a class="tocitem" href="../MaterialModelsBase/">Mechanical materials</a></li><li><a class="tocitem" href="../ExampleElements/">Example elements</a></li></ul></li><li><a class="tocitem" href="../../Customization/">Customizations</a></li><li><a class="tocitem" href="../../internals/">Internals</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Reference</a></li><li><a class="is-disabled">Convenience</a></li><li class="is-active"><a href>External loads</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>External loads</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/KnutAM/FerriteAssembly.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/KnutAM/FerriteAssembly.jl/blob/main/docs/src/Convenience/LoadHandler.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="External-loading"><a class="docs-heading-anchor" href="#External-loading">External loading</a><a id="External-loading-1"></a><a class="docs-heading-anchor-permalink" href="#External-loading" title="Permalink"></a></h1><p>In many simulations, there is a need to add contributions to the weak form  in the form of external loads, either as source terms/body loads, or as  non-zero Neumann boundary conditions. <code>FerriteAssembly</code> provides a  <code>LoadHandler</code> for this purpose, such that it is not necessary to  implement those terms into the specific elements directly. This avoid having  to pass information to the elements about changes to the load levels etc. </p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteAssembly.LoadHandler" href="#FerriteAssembly.LoadHandler"><code>FerriteAssembly.LoadHandler</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">LoadHandler(dh::AbstractDofHandler)</code></pre><p>Create a load handler for external loads to be applied on the  finite element simulation defined by a dofhandler <code>dh</code>.  It can be used to apply the Neumann and body load   contributions to the external &quot;force&quot;-vector, <code>fext</code>:</p><pre><code class="language-julia hljs">fext = zeros(ndofs(dh))
lh=LoadHandler(dh)
add!(lh, Neumann(...))  # Add Neumann boundary conditions
add!(lh, BodyLoad(...)) # Add body load
for t in timesteps
    fill!(fext, 0)
    apply!(fext, lh, t) # Add contributions to `fext`
    ...
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteAssembly.jl/blob/ca44e49b99b69fb84dbe8da41a5ec58e72013acd/src/LoadHandler/LoadHandler.jl#L6-L25">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteAssembly.Neumann" href="#FerriteAssembly.Neumann"><code>FerriteAssembly.Neumann</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Neumann(field_name::Symbol, fv_info::Union{FaceValues,QuadratureRule,Int}, faceset::Set{FaceIndex}, f)</code></pre><p>Define a Neumann contribution with the weak forms according to </p><p class="math-container">\[\int_{\Gamma} f \ \delta u \ \mathrm{d}\Gamma, \quad \text{Scalar fields} \\

\int_{\Gamma} \boldsymbol{f} \cdot \boldsymbol{\delta u} \ \mathrm{d}\Gamma,
\quad \text{Vector fields} \]</p><p>where <span>$\Gamma$</span> is the boundary where the contribution is active.  <span>$f$</span>, or <span>$\boldsymbol{f}$</span>, is the prescribed Neumann value,  defined by a function with signatures</p><p><code>f(x::Vec, t::Real, n::Vec) -&gt; Number</code> (Scalar field)</p><p><code>f(x::Vec, t::Real, n::Vec) -&gt; Vec{dim}</code> (Vector field)</p><p>where <code>x</code> is the spatial position of the current quadrature point, <code>t</code> is the  current time, and <code>n</code> is the face normal vector. The remaining input arguments are</p><ul><li><code>fieldname</code> describes the field on which the boundary condition should abstract</li><li><code>fv_info</code> gives required input to determine the facevalues. The following input types are accepted:<ul><li><code>Int</code> giving the integration order to use. <code>FaceValues</code> are deduced from the interpolation  of <code>fieldname</code> and the output of <code>f</code>. </li><li><code>QuadratureRule</code> matching the interpolation for <code>fieldname</code> for faces in <code>faceset</code> <code>FaceValues</code> are deduced  from the output of <code>f</code></li><li><code>FaceValues</code> matching the interpolation for <code>fieldname</code> for the faces in <code>faceset</code> and output of <code>f</code></li></ul></li><li><code>faceset</code> describes which faces the BC is applied to</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteAssembly.jl/blob/ca44e49b99b69fb84dbe8da41a5ec58e72013acd/src/LoadHandler/Neumann.jl#L1-L30">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteAssembly.BodyLoad" href="#FerriteAssembly.BodyLoad"><code>FerriteAssembly.BodyLoad</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">BodyLoad(field_name::Symbol, cv_info::Union{CellValues,QuadratureRule,Int}, cellset::Set{Int}, f)
BodyLoad(field_name::Symbol, cv_info::Union{CellValues,QuadratureRule,Int}, f)</code></pre><p>Define a body load contribution with the weak forms according to </p><p class="math-container">\[\int_{\Omega} f \ \delta u \ \mathrm{d}\Omega, \quad \text{Scalar fields} \\

\int_{\Omega} \boldsymbol{f} \cdot \boldsymbol{\delta u} \ \mathrm{d}\Omega,
\quad \text{Vector fields} \]</p><p>where <span>$\Omega$</span> is the region where the contribution is active.  <span>$f$</span>, or <span>$\boldsymbol{f}$</span>, is the prescribed volumetric contribution (e.g. force/volume),  defined by a function with signatures</p><p><code>f(x::Vec, t::Real) -&gt; Number</code> (Scalar field)</p><p><code>f(x::Vec, t::Real) -&gt; Vec{dim}</code> (Vector field)</p><p>where <code>x</code> is the spatial position of the current quadrature point and <code>t</code> is the  current time. The remaining input arguments are</p><ul><li><p><code>fieldname</code> describes the field on which the load should act</p></li><li><p><code>cv_info</code> gives required input to determine the cellvalues. The following input types are accepted:</p><ul><li><code>Int</code> giving the integration order to use. <code>CellValues</code> are deduced from the interpolation  of <code>fieldname</code> and the output of <code>f</code>.   </li><li><code>QuadratureRule</code> matching the interpolation for <code>fieldname</code> for cells in <code>cellset</code>.  <code>CellValues</code> are deduced from the output of <code>f</code></li><li><code>CellValues</code> matching the interpolation for <code>fieldname</code> for the cells in <code>cellset</code> and output of <code>f</code></li></ul></li><li><p><code>cellset</code> describes which cells the load is applied to. If not given, the load is applied to all cells </p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteAssembly.jl/blob/ca44e49b99b69fb84dbe8da41a5ec58e72013acd/src/LoadHandler/BodyLoad.jl#L1-L32">source</a></section></article><pre><code class="nohighlight hljs"></code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../Workers/Integrators/">« Integrators</a><a class="docs-footer-nextpage" href="../MaterialModelsBase/">Mechanical materials »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.0.0 on <span class="colophon-date" title="Saturday 16 September 2023 12:27">Saturday 16 September 2023</span>. Using Julia version 1.9.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
